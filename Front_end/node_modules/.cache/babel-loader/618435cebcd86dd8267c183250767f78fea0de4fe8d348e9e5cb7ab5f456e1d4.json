{"ast":null,"code":"import axios from 'axios';\nconst getCSRFToken = () => {\n  let csrfToken = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, 10) === 'csrftoken=') {\n        csrfToken = decodeURIComponent(cookie.substring(10));\n        break;\n      }\n    }\n  }\n  return csrfToken;\n};\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api/'\n});\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = `Token ${token}`;\n  }\n  config.headers['X-CSRFToken'] = getCSRFToken();\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","getCSRFToken","csrfToken","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject"],"sources":["C:/Users/Ge/Desktop/CITS5206-capstone/Front_end/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst getCSRFToken = () => {\r\n    let csrfToken = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            if (cookie.substring(0, 10) === 'csrftoken=') {\r\n                csrfToken = decodeURIComponent(cookie.substring(10));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return csrfToken;\r\n};\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:8000/api/',\r\n});\r\n\r\napi.interceptors.request.use(config => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        config.headers['Authorization'] = `Token ${token}`;\r\n    }\r\n    config.headers['X-CSRFToken'] = getCSRFToken();\r\n    return config;\r\n}, error => {\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACvB,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAIC,QAAQ,CAACC,MAAM,IAAID,QAAQ,CAACC,MAAM,KAAK,EAAE,EAAE;IAC3C,MAAMC,OAAO,GAAGF,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC;IAC1C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,MAAMH,MAAM,GAAGC,OAAO,CAACE,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;MAChC,IAAIL,MAAM,CAACM,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,YAAY,EAAE;QAC1CR,SAAS,GAAGS,kBAAkB,CAACP,MAAM,CAACM,SAAS,CAAC,EAAE,CAAC,CAAC;QACpD;MACJ;IACJ;EACJ;EACA,OAAOR,SAAS;AACpB,CAAC;AAED,MAAMU,GAAG,GAAGZ,KAAK,CAACa,MAAM,CAAC;EACrBC,OAAO,EAAE;AACb,CAAC,CAAC;AAEFF,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACnC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACPD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,SAASH,KAAK,EAAE;EACtD;EACAD,MAAM,CAACI,OAAO,CAAC,aAAa,CAAC,GAAGrB,YAAY,CAAC,CAAC;EAC9C,OAAOiB,MAAM;AACjB,CAAC,EAAEK,KAAK,IAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,eAAeX,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}