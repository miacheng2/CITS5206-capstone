{"ast":null,"code":"import axios from 'axios';\nconst getCSRFToken = () => {\n  let csrfToken = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, 10) === 'csrftoken=') {\n        csrfToken = decodeURIComponent(cookie.substring(10));\n        break;\n      }\n    }\n  }\n  return csrfToken;\n};\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api/'\n});\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = `Token ${token}`;\n  }\n  config.headers['X-CSRFToken'] = getCSRFToken();\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","getCSRFToken","csrfToken","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject"],"sources":["/Users/xia/Documents/CITS5206/group/CITS5206-capstone/Front_end/src/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst getCSRFToken = () => {\n    let csrfToken = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            if (cookie.substring(0, 10) === 'csrftoken=') {\n                csrfToken = decodeURIComponent(cookie.substring(10));\n                break;\n            }\n        }\n    }\n    return csrfToken;\n};\n\nconst api = axios.create({\n    baseURL: 'http://localhost:8000/api/',\n});\n\napi.interceptors.request.use(config => {\n    const token = localStorage.getItem('token');\n    if (token) {\n        config.headers['Authorization'] = `Token ${token}`;\n    }\n    config.headers['X-CSRFToken'] = getCSRFToken();\n    return config;\n}, error => {\n    return Promise.reject(error);\n});\n\nexport default api;\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACvB,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAIC,QAAQ,CAACC,MAAM,IAAID,QAAQ,CAACC,MAAM,KAAK,EAAE,EAAE;IAC3C,MAAMC,OAAO,GAAGF,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC;IAC1C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,MAAMH,MAAM,GAAGC,OAAO,CAACE,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;MAChC,IAAIL,MAAM,CAACM,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,YAAY,EAAE;QAC1CR,SAAS,GAAGS,kBAAkB,CAACP,MAAM,CAACM,SAAS,CAAC,EAAE,CAAC,CAAC;QACpD;MACJ;IACJ;EACJ;EACA,OAAOR,SAAS;AACpB,CAAC;AAED,MAAMU,GAAG,GAAGZ,KAAK,CAACa,MAAM,CAAC;EACrBC,OAAO,EAAE;AACb,CAAC,CAAC;AAEFF,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACnC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACPD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,SAASH,KAAK,EAAE;EACtD;EACAD,MAAM,CAACI,OAAO,CAAC,aAAa,CAAC,GAAGrB,YAAY,CAAC,CAAC;EAC9C,OAAOiB,MAAM;AACjB,CAAC,EAAEK,KAAK,IAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,eAAeX,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}